---
title: Java类和实例
tags:
    - SpringBoot
categories:
    - SpringBoot
author: alanJiang
thumbnail: /img/thumbnail/springboot.jfif
blogexcerpt:  静态是怎么回事？上一讲当中我们介绍了类方法和类变量，上次给大家布置了一个小作业，写一个银行转账的简单的类。这个功能当然不难，大家也都熟悉，不过其实这里面是隐藏了许多问题的。
                      比如A账户在给B账户，转账的时候，A账户扣了钱之后系统发生了异常
---
## 前言

上一讲当中我们介绍了类方法和类变量，上次给大家布置了一个小作业，写一个银行转账的简单的类。这个功能当然不难，大家也都熟悉，不过其实这里面是隐藏了许多问题的。

比如A账户在给B账户，转账的时候，A账户扣了钱之后系统发生了异常，给B账户增加余额的代码就执行不到了，这该怎么办？如果多个读写操作同时执行又该怎么办？

比如你账户里有100元，你买了一个100元的东西，在购买操作执行之前对你账户的余额进行了校验，发现余额充足。与此同时，发生了转账操作，转走了100元。此时购物的行为并没有停止，而且已经做过余额校验了，那么就会继续执行，导致账户里变成负值。而众所周知，一个人的账户余额是不能为负值的。

以上的这些问题在高并发的场景当中非常常见，但是目前我们的讲解进度还没有到那么后面，只需要实现最简单的转账功能即可，大家感兴趣的同学可以自己了解一下。

老规矩，在微信公众号：潇潇学长当中回复”账户“，即可获得学长的代码。

### 静态的概念

在前一讲当中，我们留了一个问题给大家。为什么有的方法可以直接通过类名加上方法名直接调用，而有的时候就必须先new出来一个实例呢？究竟它们之间有什么差别呢？

为了解释这个问题，我们要引入一个新的概念，叫做”静态“。

静态写成关键词是static，大家都不陌生，在之前的讲义当中，我们每一次定义方法，都必须要在前面加上static关键词。

很多人看到静态这个词，觉得静态的意思就是固定不变的，其实这是把static和final做了混淆。这个静态的概念涉及到的概念和理论太多，很难一下解释清楚，我先不解释它到底是什么意思，先简单地说说我们该怎么理解。

对于static的理解，可以粗浅地分为两层次。

先说第一个层次，对于一个类来说，它当中的字段或者是方法加上了static，就表示它属于这个类独有。注意，我特意没用私有，就是避免和private关键词冲突。

还用之前的印钞机和钞票打个比方，假如说A有一台印钞机，他为了证明这台印钞机是他的。他在印钞机背面贴上了标签，写上了自己的名字。有一天，B想要占有这台机器，就擦掉了A的名字，写上了自己的。但是不管这台印钞机上到底是谁的名字，它印出来的钞票都是一样的，并且钞票上也不会带有这个标签的信息。也就是说，这个标签是印钞机独有的，与钞票无关。

用java的语言来说，这个静态的变量和方法都是类所独有的，与从类当中new出来的实例无关。并且实例也是不能访问类当中的静态变量的。

如果能理解到这个层次，差不多就弄清楚了static的用途，就是标记这个方法或者是变量属于类所独有的。平时写写代码，使用一下其实是够了。但是如果面试的时候问起来，这么答并不够深入。

第二个层次，一个类当中的静态变量与其他变量虽然写在一起，但是在java的虚拟机当中，其实是隔离的。我们都知道java虚拟机当中用到的内存分为两块，一块是堆内存，一块是栈内存。
"